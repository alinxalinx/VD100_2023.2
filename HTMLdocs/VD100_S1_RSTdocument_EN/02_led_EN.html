

<!DOCTYPE html>


<html lang="zh-CN" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Chapter 2 PL’s “Hello World” LED experiment &#8212; Versal 开发平台FPGA教程 1.0 文档</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/translations.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'VD100_S1_RSTdocument_EN/02_led_EN';</script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Chapter 3 PL reads and writes DDR4 experiment through NoC" href="03_pl_rw_ddr_EN.html" />
    <link rel="prev" title="Chapter 1 Introduction to Versal" href="01_Versal_EN.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="zh-CN"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/8.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/8.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Versal development platform
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Company Profile</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_aboutALINX_EN.html">About ALINX</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../User_Manual_EN/VD100UserManual_Core_board_EN.html">Development board introduction</a></li>

<li class="toctree-l1"><a class="reference internal" href="../User_Manual_EN/VD100UserManual_Expansion%20board_EN.html">expanding board</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">VD100 model board S1 FPGA tutorial</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_Introduction_EN.html">illustrate</a></li>



<li class="toctree-l1"><a class="reference internal" href="01_Versal_EN.html">Chapter 1 Introduction to Versal</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 2 PL’s “Hello World” LED experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_pl_rw_ddr_EN.html">Chapter 3 PL reads and writes DDR4 experiment through NoC</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_lvds_lcd_EN.html">Chapter 4 LVDS LCD screen display experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_ibert_test_EN.html">Chapter 5 GTYP transceiver bit error rate test IBERT experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_ps_hello_EN.html">Chapter 6 Experience ARM, bare metal output “Hello World”</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_ps_lwip_EN.html">Chapter 7 lwip used by PS side Ethernet</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_versal_trd_EN.html">Chapter 8 Overall engineering and experiments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">VD100 model board S2 Linux tutorial</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/1_%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8Linux-%E5%88%B6%E4%BD%9C%E5%90%AF%E5%8A%A8%E5%BC%80%E5%8F%91%E6%9D%BFlinux%E7%B3%BB%E7%BB%9F%E7%9A%84SD%E5%8D%A1.html">Quick-boot Linux-Make an SD card to boot the development board Linux system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/2_%E5%85%B3%E4%BA%8EPetalinux.html">About PETALINUX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_01_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-%E4%B8%B2%E5%8F%A3.html">Chapter 1 Serial Port (UART)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_02_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-LED%E7%81%AF%E5%92%8C%E6%8C%89%E9%94%AE.html">Chapter II LEDS, KEYS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_03_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-CAN.html">Chapter III CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_04_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-LCD.html">Chapter 4 LCD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_05_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-USB.html">Chapter 5 USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_06_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-%E4%BB%A5%E5%A4%AA%E7%BD%91.html">Chapter 6 ETH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_07_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-MIPI%E6%91%84%E5%83%8F%E5%A4%B4.html">Chapter 7 MIPI Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_08_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-EMMC.html">Chapter 8 EMMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_09_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-EEPROM.html">Chapter 9 EEPROM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_10_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-LM75.html">Chapter X LM75</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/3_11_%E5%9C%A8Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E6%9D%BF%E5%A4%96%E8%AE%BE-QSPIFLASH.html">Chapter 11 QSPI FLASH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VD100_S2_RSTdocument_EN/4_%E5%AE%89%E8%A3%85QT%E5%BA%93%E5%92%8COPENCV%E5%BA%93%E4%BB%A5%E5%8F%8A%E5%9C%A8QTCreator%E4%B8%AD%E8%AE%BE%E7%BD%AE%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83.html">Installing the QT and OPENCV libraries and setting up the build environment in QTCreator</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Copyright Alinx</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_liability%20statement_EN.html">Copyright statement</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/alinxalinx/VD100_2023.2" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="源码库"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="下载此页面">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/VD100_S1_RSTdocument_EN/02_led_EN.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="下载源文件"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="列印成 PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="全屏模式"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="搜索" aria-label="搜索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 2 PL’s “Hello World” LED experiment</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> 目录 </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#led-hardware-introduction">LED hardware introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-vivado-project">Create a Vivado project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-verilog-hdl-file-to-light-up-led">Create Verilog HDL file to light up LED</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-pin-constraints">Add pin constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-pdi-file">Generate pdi file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vivado-simulation">Vivado simulation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#download">download</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experiment-summary">Experiment summary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="chapter-2-pl-s-hello-world-led-experiment">
<h1>Chapter 2 PL’s “Hello World” LED experiment<a class="headerlink" href="#chapter-2-pl-s-hello-world-led-experiment" title="此标题的永久链接">#</a></h1>
<p><strong>Experimental Vivado project for “led”.</strong></p>
<p>For Versal, PL (FPGA) development is crucial. This is where Versal has an advantage over other ARMs. It can customize many ARM-side peripherals. Before customizing ARM-side peripherals, let us first go through an LED example. Cheng Lai is familiar with the development process of PL (FPGA) and the basic operation of Vivado software. This development process is exactly the same as that of FPGA chips without ARM.</p>
<p>In this routine, what we are going to do is an LED light control experiment. We control the LED light on the development board to flip once every second to achieve on, off, on, and off control.</p>
<section id="led-hardware-introduction">
<h2>LED hardware introduction<a class="headerlink" href="#led-hardware-introduction" title="此标题的永久链接">#</a></h2>
<p>The PL part of the development board is connected to a red user LED light. This 1 light is completely controlled by PL. If PL_LED1 is high level, the three-stage tube is turned on, and the light will be on, otherwise it will be off.</p>
<img alt="../_images/image291.png" src="../_images/image291.png" />
</section>
<section id="create-a-vivado-project">
<h2>Create a Vivado project<a class="headerlink" href="#create-a-vivado-project" title="此标题的永久链接">#</a></h2>
<ol class="arabic simple">
<li><p>Start Vivado. In Windows, you can start it by double-clicking the Vivado shortcut.</p></li>
<li><p>Click “Create New Project” in the Vivado development environment to create a new project.</p></li>
</ol>
<img alt="../_images/image301.png" src="../_images/image301.png" />
<ol class="arabic simple" start="3">
<li><p>A wizard for creating a new project will pop up, click “Next”</p></li>
</ol>
<img alt="../_images/image31.png" src="../_images/image31.png" />
<p>4) In the pop-up dialog box, enter the project name and the directory where the project is stored. Here we take an LED project name. Need to pay attention to the project path “Project
location” cannot have Chinese spaces, and the path name cannot be too long.</p>
<img alt="../_images/image32.png" src="../_images/image32.png" />
<ol class="arabic simple" start="5">
<li><p>Select “RTL Project” in the project type</p></li>
</ol>
<img alt="../_images/image33.png" src="../_images/image33.png" />
<p>6) Target language “Target
language” select “Verilog”. Although Verilog is selected, VHDL can also be used to support multi-language mixed programming.</p>
<img alt="../_images/image34.png" src="../_images/image34.png" />
<ol class="arabic simple" start="7">
<li><p>Click “Next” without adding any files</p></li>
</ol>
<img alt="../_images/image35.png" src="../_images/image35.png" />
<ol class="arabic simple" start="8">
<li><p>Select “xc2302-sfva784-1LP-eS”</p></li>
</ol>
<img alt="../_images/image36.png" src="../_images/image36.png" />
<ol class="arabic simple" start="9">
<li><p>Click “Finish” to complete the creation of the future project named “led”.</p></li>
</ol>
<img alt="../_images/image37.png" src="../_images/image37.png" />
<ol class="arabic simple" start="10">
<li><p>Vivado software interface</p></li>
</ol>
<img alt="../_images/image38.png" src="../_images/image38.png" />
</section>
<section id="create-verilog-hdl-file-to-light-up-led">
<h2>Create Verilog HDL file to light up LED<a class="headerlink" href="#create-verilog-hdl-file-to-light-up-led" title="此标题的永久链接">#</a></h2>
<ol class="arabic simple">
<li><p>Click the Add Sources icon under Project Manager (or use the shortcut Alt+A)</p></li>
</ol>
<img alt="../_images/image39.png" src="../_images/image39.png" />
<ol class="arabic simple" start="2">
<li><p>Select “Add or create design sources” and click “Next”</p></li>
</ol>
<img alt="../_images/image40.png" src="../_images/image40.png" />
<ol class="arabic simple" start="3">
<li><p>Select “Create File”</p></li>
</ol>
<img alt="../_images/image411.png" src="../_images/image411.png" />
<ol class="arabic simple" start="4">
<li><p>Set the file name “File name” to “led” and click “OK”</p></li>
</ol>
<img alt="../_images/image42.png" src="../_images/image42.png" />
<ol class="arabic simple" start="5">
<li><p>Click “Finish” to complete adding the “led.v” file</p></li>
</ol>
<img alt="../_images/image43.png" src="../_images/image43.png" />
<p>6) In the pop-up module definition “Define
Module”, you can specify the module name “Module” of the “led.v” file
name”, the default here will not be “led”, you can also specify some ports, but do not specify them here for the time being, click “OK”.</p>
<img alt="../_images/image44.png" src="../_images/image44.png" />
<ol class="arabic simple" start="7">
<li><p>Select “Yes” in the pop-up dialog box</p></li>
</ol>
<img alt="../_images/image45.png" src="../_images/image45.png" />
<ol class="arabic simple" start="8">
<li><p>Double-click “led.v” to open the file and then edit</p></li>
</ol>
<img alt="../_images/image46.png" src="../_images/image46.png" />
<p>9) Write “led.v”, which defines a 32-bit register timer.
Used to count 0~199999999 (1 second) in a loop. When counting to 199999999 (1 second),
The register timer becomes 0 and the four LEDs are toggled. In this way, if the original LED is off, it will light up; if the original LED is on, it will go out. Since the input clock is a 200MHz differential clock, the IBUFDS primitive needs to be added to connect the differential signal. The code after writing is as follows:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p>`timescale 1ns <strong>/</strong> 1ps</p>
<p><strong>module</strong> led<strong>(</strong></p>
<p>//Differential system clock</p>
<p><strong>input</strong> sys_clk_p<strong>,</strong></p>
<p><strong>input</strong> sys_clk_n<strong>,</strong></p>
<p><strong>input</strong> rst_n<strong>,</strong></p>
<p><strong>output</strong> <strong>reg</strong> led</p>
<p><strong>);</strong></p>
<p><strong>reg[</strong>31<strong>:</strong>0<strong>]</strong> timer_cnt<strong>;</strong></p>
<p><strong>wire</strong> sys_clk <strong>;</strong></p>
<p>IBUFDS IBUFDS_inst <strong>(</strong></p>
<p><strong>.</strong>O<strong>(</strong>sys_clk<strong>),</strong> // Buffer output</p>
<p><strong>.</strong>I<strong>(</strong>sys_clk_p<strong>),</strong> // Diff_p buffer input (connect
directly to top-level port)</p>
<p><strong>.</strong>IB<strong>(</strong>sys_clk_n<strong>)</strong> // Diff_n buffer input (connect
directly to top-level port)</p>
<p><strong>);</strong></p>
<p><strong>always&#64;(posedge</strong> sys_clk<strong>)</strong></p>
<p><strong>begin</strong></p>
<p><strong>if</strong> <strong>(!</strong>rst_n<strong>)</strong></p>
<p><strong>begin</strong></p>
<p>led <strong>&lt;=</strong> 1’b0 <strong>;</strong></p>
<p>timer_cnt <strong>&lt;=</strong> 32’d0 <strong>;</strong></p>
<p><strong>end</strong></p>
<p><strong>else</strong> <strong>if(</strong>timer_cnt <strong>&gt;=</strong> 32’d199_999_999<strong>)</strong> //1 second
counter, 200M-1=199999999</p>
<p><strong>begin</strong></p>
<p>led <strong>&lt;=</strong> <strong>~</strong>led<strong>;</strong></p>
<p>timer_cnt <strong>&lt;=</strong> 32’d0<strong>;</strong></p>
<p><strong>end</strong></p>
<p><strong>else</strong></p>
<p><strong>begin</strong></p>
<p>led <strong>&lt;=</strong> led<strong>;</strong></p>
<p>timer_cnt <strong>&lt;=</strong> timer_cnt <strong>+</strong> 32’d1<strong>;</strong></p>
<p><strong>end</strong></p>
<p><strong>end</strong></p>
<p><strong>endmodule</strong></p>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="10">
<li><p>Save the code after writing it</p></li>
</ol>
</section>
<section id="add-pin-constraints">
<h2>Add pin constraints<a class="headerlink" href="#add-pin-constraints" title="此标题的永久链接">#</a></h2>
<p>The constraint file format used by Vivado is xdc file. The xdc file mainly completes the pin constraints and clock constraints.
and group constraints. Here we need to assign the input and output ports in the led.v program to the real pins of the FPGA.</p>
<ol class="arabic simple">
<li><p>Create a new constraint file</p></li>
</ol>
<img alt="../_images/image47.png" src="../_images/image47.png" />
<p>2)Create File</p>
<img alt="../_images/image48.png" src="../_images/image48.png" />
<img alt="../_images/image49.png" src="../_images/image49.png" />
<ol class="arabic simple" start="3">
<li><p>Bind the reset signal rst_n to the button on the PL side, assign pins and level standards to the LED and clock, and the constraints are as follows</p></li>
</ol>
<img alt="../_images/image50.png" src="../_images/image50.png" />
<table class="table">
<tbody>
<tr class="row-odd"><td><p>set_property PACKAGE_PIN AB23 [get_ports sys_clk_p]</p>
<p>set_property PACKAGE_PIN F21 [get_ports rst_n]</p>
<p>set_property PACKAGE_PIN E20 [get_ports led]</p>
<p>set_property IOSTANDARD LVCMOS15 [get_ports led]</p>
<p>set_property IOSTANDARD LVCMOS15 [get_ports rst_n]</p>
<p>set_property IOSTANDARD LVDS15 [get_ports sys_clk_p]</p>
<p>create_clock -period 5.000 -name sys_clk_p -waveform {0.000 2.500}
[get_ports sys_clk_p]</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="generate-pdi-file">
<h2>Generate pdi file<a class="headerlink" href="#generate-pdi-file" title="此标题的永久链接">#</a></h2>
<p>1) The compilation process can be subdivided into synthesis, placement and routing, bit file generation, etc. Here we directly click “Generate
Device Image”, directly generate pdi files.</p>
<img alt="../_images/image511.png" src="../_images/image511.png" />
<ol class="arabic simple" start="2">
<li><p>In the pop-up dialog box, you can select the number of tasks, which is related to the number of CPU cores. Generally, the larger the number, the faster the compilation. Click “OK”</p></li>
</ol>
<img alt="../_images/image52.png" src="../_images/image52.png" />
<ol class="arabic simple" start="3">
<li><p>An error was reported during compilation.</p></li>
</ol>
<img alt="../_images/image53.png" src="../_images/image53.png" />
<p>[DRC CIPS-2] Versal CIPS exists check - wdi: Versal designs must
contain a CIPS IP in the netlist hierarchy to function properly.
Please create an instance of the CIPS IP and configure it. Without a
CIPS IP in the design, Vivado will not generate a CDO for the PMC,
an elf for the PLM.</p>
<p>Judging from the error report, the versa design must include CIPS, that is, the PS side, so the CIPS core needs to be added.</p>
<ol class="arabic simple" start="4">
<li><p>Select Create Block Design</p></li>
</ol>
<img alt="../_images/image54.png" src="../_images/image54.png" />
<img alt="../_images/image55.png" src="../_images/image55.png" />
<ol class="arabic simple" start="5">
<li><p>Add CIPS</p></li>
</ol>
<img alt="../_images/image56.png" src="../_images/image56.png" />
<img alt="../_images/image57.png" src="../_images/image57.png" />
<ol class="arabic simple" start="6">
<li><p>Double-click CIPS, select PL_Subsystem, only the logic on the PL side</p></li>
</ol>
<img alt="../_images/image58.png" src="../_images/image58.png" />
<ol class="arabic simple" start="7">
<li><p>Right-click Generate Output products</p></li>
</ol>
<img alt="../_images/image59.png" src="../_images/image59.png" />
<img alt="../_images/image60.png" src="../_images/image60.png" />
<ol class="arabic simple" start="8">
<li><p>Then right-click to create HDL</p></li>
</ol>
<img alt="../_images/image611.png" src="../_images/image611.png" />
<img alt="../_images/image62.png" src="../_images/image62.png" />
<ol class="arabic simple" start="9">
<li><p>Instantiate the PS side file in led.v</p></li>
</ol>
<img alt="../_images/image63.png" src="../_images/image63.png" />
<img alt="../_images/image64.png" src="../_images/image64.png" />
<p>10) Then Generate
Bitstream, there are no errors in the compilation, the compilation is completed, a dialog box pops up allowing us to choose subsequent operations, you can select “Open
Hardware Manger”, of course, you can also choose “Cancel”, we choose here
“Cancel”, don’t download it yet.</p>
<img alt="../_images/image65.png" src="../_images/image65.png" />
</section>
<section id="vivado-simulation">
<h2>Vivado simulation<a class="headerlink" href="#vivado-simulation" title="此标题的永久链接">#</a></h2>
<p>Next, we might as well try our best and use Vivado’s own simulation tool to output waveforms to verify whether the flow lamp program design results are consistent with our expectations (note: you can also simulate before generating the bit file). Specific steps are as follows:</p>
<ol class="arabic simple">
<li><p>Set the simulation configuration of Vivado, right-click Simulation Settings in SIMULATION.</p></li>
</ol>
<img alt="../_images/image66.png" src="../_images/image66.png" />
<p>2. In Simulation
In the Settings window, configure as shown below. Here, set it to 50ms (set it as needed). For other settings, follow the default settings. Click OK to complete.</p>
<img alt="../_images/image67.png" src="../_images/image67.png" />
<ol class="arabic simple" start="3">
<li><p>Add the incentive test file and click Add under Project Manager Sources icon, click Next after setting as shown below.</p></li>
</ol>
<img alt="../_images/image68.png" src="../_images/image68.png" />
<ol class="arabic simple" start="4">
<li><p>Click Create File to generate the simulation stimulus file.</p></li>
</ol>
<img alt="../_images/image69.png" src="../_images/image69.png" />
<p>Enter the name of the stimulus file in the pop-up dialog box. Here we enter the name vtf_led_test.</p>
<img alt="../_images/image70.png" src="../_images/image70.png" />
<ol class="arabic simple" start="5">
<li><p>Click the Finish button to return.</p></li>
</ol>
<img alt="../_images/image711.png" src="../_images/image711.png" />
<p>We will not add IO Ports here, click OK.</p>
<img alt="../_images/image72.png" src="../_images/image72.png" />
<p>In Simulation
There is an additional vtf_led_test file just added in the Sources directory. Double-click to open this file, and you can see that there is only the definition of the module name and nothing else.</p>
<img alt="../_images/image73.png" src="../_images/image73.png" />
<ol class="arabic simple" start="6">
<li><p>Next we need to write the content of this vtf_led_test.v file. First define the input and output signals, and then instantiate the led_test module to make the led_test program part of this test program. Then add reset and clock excitation. The completed vtf_led_test.v file is as follows:</p></li>
</ol>
<table class="table">
<tbody>
<tr class="row-odd"><td><p>`timescale 1ns <strong>/</strong> 1ps</p>
<p>// Module Name: vtf_led_test</p>
<p><strong>module</strong> vtf_led_test<strong>;</strong></p>
<p>// Inputs</p>
<p><strong>reg</strong> sys_clk_p<strong>;</strong></p>
<p><strong>reg</strong> rst_n <strong>;</strong></p>
<p><strong>wire</strong> sys_clk_n<strong>;</strong></p>
<p>// Outputs</p>
<p><strong>wire</strong> led<strong>;</strong></p>
<p>// Instantiate the Unit Under Test (UUT)</p>
<p>led uut <strong>(</strong></p>
<p><strong>.</strong>sys_clk_p<strong>(</strong>sys_clk_p<strong>),</strong></p>
<p><strong>.</strong>sys_clk_n<strong>(</strong>sys_clk_n<strong>),</strong></p>
<p><strong>.</strong>rst_n<strong>(</strong>rst_n<strong>),</strong></p>
<p><strong>.</strong>led<strong>(</strong>led<strong>)</strong></p>
<p><strong>);</strong></p>
<p><strong>initial</strong></p>
<p><strong>begin</strong></p>
<p>// Initialize Inputs</p>
<p>sys_clk_p <strong>=</strong> 0<strong>;</strong></p>
<p>rst_n <strong>=</strong> 0<strong>;</strong></p>
<p>// Wait for global reset to finish</p>
<p><strong>#</strong>1000<strong>;</strong></p>
<p>rst_n <strong>=</strong> 1<strong>;</strong></p>
<p><strong>end</strong></p>
<p>//Create clock</p>
<p><strong>always</strong> <strong>#</strong>2.5 sys_clk_p <strong>=</strong> <strong>~</strong> sys_clk_p<strong>;</strong></p>
<p><strong>assign</strong> sys_clk_n <strong>=</strong> <strong>~</strong>sys_clk_p <strong>;</strong></p>
<p><strong>endmodule</strong></p>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li><p>After writing, save, vtf_led_test.v automatically becomes the top level of this simulation Hierarchy, and below it is the design file led_test.v.</p></li>
</ol>
<img alt="../_images/image74.png" src="../_images/image74.png" />
<ol class="arabic simple" start="8">
<li><p>Click the Run Simulation button and select Run Behavioral Simulation. Here we can just do behavioral level simulation.</p></li>
</ol>
<img alt="../_images/image75.png" src="../_images/image75.png" />
<p>If there are no errors, the simulation software in Vivado starts working.</p>
<ol class="arabic simple" start="10">
<li><p>After the simulation interface pops up, as shown below, the interface is the waveform of 50ms when the simulation software automatically runs to the simulation setting.</p></li>
</ol>
<img alt="../_images/image76.png" src="../_images/image76.png" />
<p>Since the state change time of LED[3:0] designed in the program is long, and the simulation is relatively time-consuming, we observe the changes of the timer[31:0] counter here. Put it into Wave and observe it (click uut under the Scope interface,Then right-click and select timer under the Objects interface, and select Add Wave in the pop-up drop-down menu.Window).</p>
<img alt="../_images/image77.png" src="../_images/image77.png" />
<p>After adding, the timer is displayed on the Wave interface, as shown in the figure below.</p>
<img alt="../_images/image78.png" src="../_images/image78.png" />
<ol class="arabic simple" start="11">
<li><p>Click the Restart button marked below to reset, and then click RunAll button. (Patience is required!!!), you can see that the simulation waveform is consistent with the design. (Note: The longer the simulation time, the greater the disk space occupied by the simulated waveform file. The waveform file is in the xx.sim folder of the project directory)</p></li>
</ol>
<img alt="../_images/image79.png" src="../_images/image79.png" />
<img alt="../_images/image80.png" src="../_images/image80.png" />
<p>We can see that the LED signal will change to 1, indicating that the LED light will brighten.</p>
</section>
<section id="download">
<h2>download<a class="headerlink" href="#download" title="此标题的永久链接">#</a></h2>
<ol class="arabic simple">
<li><p>Connect the JTAG interface of the development board and power on the development board. Note that the pull-out switch must select JTAG mode, that is, pull all the switches to “ON”. The value represented by “ON” is 0. If JTAG mode is not used, an error will be reported when downloading. .</p></li>
</ol>
<img alt="../_images/image811.png" src="../_images/image811.png" />
<img alt="../_images/image82.png" src="../_images/image82.png" />
<ol class="arabic simple" start="2">
<li><p>Click “Auto Connect” on the “HARDWARE MANAGER” interface to automatically connect to the device</p></li>
</ol>
<img alt="../_images/image83.png" src="../_images/image83.png" />
<ol class="arabic simple" start="3">
<li><p>Select the chip, right-click “Program Device…”</p></li>
</ol>
<img alt="../_images/image84.png" src="../_images/image84.png" />
<ol class="arabic simple" start="4">
<li><p>Click “Program” in the pop-up window</p></li>
</ol>
<img alt="../_images/image85.png" src="../_images/image85.png" />
<ol class="arabic simple" start="5">
<li><p>Wait for download</p></li>
</ol>
<img alt="../_images/image86.png" src="../_images/image86.png" />
<p>6) After the download is completed, we can see the PL
The LED starts changing every second. At this point, the Vivado simple process experience is completed. Later chapters will introduce that if you burn the program to Flash, you need the cooperation of the PS system to complete it. Only PL projects cannot directly burn Flash. Hello in “Experience ARM, Bare Metal Output”
It is introduced in the FAQ in the chapter “World”.</p>
</section>
<section id="experiment-summary">
<h2>Experiment summary<a class="headerlink" href="#experiment-summary" title="此标题的永久链接">#</a></h2>
<p>This chapter introduces how to develop programs on the PL side, including project establishment, constraints, simulation and other methods. You can refer to this method in subsequent code development methods.</p>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="01_Versal_EN.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">上一页</p>
        <p class="prev-next-title">Chapter 1 Introduction to Versal</p>
      </div>
    </a>
    <a class="right-next"
       href="03_pl_rw_ddr_EN.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">下一页</p>
        <p class="prev-next-title">Chapter 3 PL reads and writes DDR4 experiment through NoC</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 目录
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#led-hardware-introduction">LED hardware introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-vivado-project">Create a Vivado project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-verilog-hdl-file-to-light-up-led">Create Verilog HDL file to light up LED</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-pin-constraints">Add pin constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-pdi-file">Generate pdi file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vivado-simulation">Vivado simulation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#download">download</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experiment-summary">Experiment summary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
作者： JunFN
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024 , ALINX .
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  
        These engineering documents are copyrighted by
            <a
                href="https://www.alinx.com/"
            >ALINX official website</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="https://vd100-20232-v101.readthedocs.io/zh-cn/en/VD100_S1_RSTdocument_EN/00_aboutALINX_EN.html">English</a> | <a href="https://vd100-20232-v101.readthedocs.io/zh-cn/latest/VD100_S1_RSTdocument_CN/00_%E5%85%B3%E4%BA%8EALINX_CN.html">中文</a>
    
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>